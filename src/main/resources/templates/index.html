<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Assignment 02 Project</title>
</head>
<body>
<a href="/register" sec:authorize="!isAuthenticated()">Register</a>
<a href="/login" sec:authorize="!isAuthenticated()">Login</a>
<a href="/logout" sec:authorize="isAuthenticated()">Logout</a>
<table>
    <tr>
        <th>ID</th>
        <th>Job</th>
        <th>Description</th>
        <th>Published Date</th>
        <th>Bid</th>
    </tr>

    <tr th:each="job : ${jobList}">
        <td th:text="*{job.jobId}">1</td>
        <td><a th:href="@{/job/{jobId}(jobId=${job.jobId})}" th:text="*{job.jobName}">Job</a></td>
        <td th:text="*{job.jobDescription}">Job Description</td>
        <td th:text="*{job.jobPublishedDate}">Published Date</td>
        <td sec:authorize="!isAuthenticated()"><a href="/login">Sign in to make a bid</a></td>
        <td sec:authorize="isAuthenticated()" th:if="*{job.active}">
            <p th:if="${userid eq job.userRef.userId}">You cannot bid on your own job</p>
            <a th:href="@{/job/{jobId}(jobId=${job.jobId})}" th:unless="${userid eq job.userRef.userId}">Make
                Bid</a>
        </td>
        <td th:unless="*{job.active}">
            <p sec:authorize="isAuthenticated()">Job is out of date</p>
        </td>
    </tr>
</table>

<a href="/newJob" sec:authorize="isAuthenticated()">Add a new job</a>

</body>
</html>