<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${job.getJobName()}"></title>
</head>
<body>
<span th:text="${job.getJobName()}">Job Name</span><br/>
<span th:text="${job.getJobDescription()}">Job Description</span><br/>
<span th:text="${job.getJobPublishedDate()}">Publish Date</span><br/>

<table>
    <tr>
        <th th:text="#{job.user}">User</th>
        <th th:text="#{job.bidAmount}">Bid Amount</th>
    </tr>

    <tr th:each="bid : *{job.getJobBids()}">
        <td th:text="*{bid.getUser().userName}">User who made bid</td>
        <td>€<span th:text="*{bid.getBidAmount()}"></span></td>
    </tr>
</table>

<p th:unless="*{job.active}">
    <span th:text="#{job.WinningBidMessagePart1}">Winning Bid was made by</span>
    <span th:text="*{job.getJobBids().get(job.getJobBids().size() - 1).getUser().userName}">Bid Winner Name</span>
    <span th:text="#{job.WinningBidMessagePart2}">who bid</span>
    €<span th:text="*{job.getJobBids().get(job.getJobBids().size() - 1).getBidAmount()}">Winning Bid Amount</span>
</p>

<form class="job-form" method="post" th:action="@{/makeBid/{jobId}(jobId=${job.jobId})}"
      th:if="${userid != job.userRef.userId && job.active}" th:object="${bidForm}">
    <label th:for="*{amount}"><span th:text="#{job.bidAmountFormLabel}">Bid Amount:</span>
        <input name="bidAmount" th:field="*{amount}" type="number"/></label>
    <input th:value="#{job.makeBidInput}" type="submit"/>
</form>

<a href="/" th:text="#{common.backToJobs}">Go back to Jobs</a>
</body>
</html>